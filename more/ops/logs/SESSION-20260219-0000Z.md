# Session Log â€” 2026-02-19

Operator: Claude Code
VPS: 72.60.181.89
Goal: Implement + deploy pwl-more NFC digital business card service

## Assessment
- SSH OK (key-based)
- Radio containers: radio-web (8080), radio-rtmp (1935), radio-rtmp-auth, radio-autodj, radio-switch
- No existing postgres container â†’ using dedicated postgres in /more compose
- Nginx vhosts: 00-default.conf, radio.peoplewelike.club.conf (not touched)
- Disk: 39G available

## Decisions
- ORM: Drizzle
- Hashing: bcrypt 12 rounds
- Sessions: iron-session
- Dedicated postgres container (pwl-more-db)

## Files created
- more/app/ â€” full Next.js 14 App Router app
- more/docker-compose.yml â€” pwl-more project
- more/ops/nginx/more.peoplewelike.club.conf
- more/ops/runbooks/deploy.md, backup.md
- more/docs/PRODUCT.md, NFC.md, ADMIN_PROVISIONING.md, OPERATIONS.md
- more/scripts/create_card.ts, verify.sh
- STATUS.md, explained.md, services.md

## Deployment
See deploy.md for exact commands.

## Verification
Run: bash /opt/pwl-more/more/scripts/verify.sh oscarzillini

---

## Verification Results (Phase C complete)

### Build errors resolved
1. `npm ci` â†’ `npm install` (no lockfile)
2. Route conflicts: moved login/reset handlers to `/api/card/[username]/` 
3. Block schema: unified to flat discriminated union
4. `\!` escaping in l/[linkKey]/route.ts fixed
5. Missing `public/` dir for Dockerfile COPY
6. Healthcheck: `localhost` â†’ `127.0.0.1`

### Verification gates âœ“

| Check | Result |
|-------|--------|
| `/health` | `{"ok":true}` |
| `/more/oscarzillini` | HTTP 200 |
| `/more/oscarzillini/qr` | `image/svg+xml` |
| `/` redirect | â†’ radio.peoplewelike.club |
| `pwl-more-app` container | healthy |
| `pwl-more-db` container | healthy |
| Radio containers | untouched (5 running) |

### URLs
- Public card: https://more.peoplewelike.club/more/oscarzillini
- Login: https://more.peoplewelike.club/more/oscarzillini/login
- QR: https://more.peoplewelike.club/more/oscarzillini/qr

### Credentials (change after handoff)
- Username: oscarzillini
- Email: oscar@peoplewelike.club
- Pincode: 1234 (CHANGE THIS)

### GitHub
Repo: gedzilius-lang/more @ main (3 commits)
- feat: implement pwl-more NFC digital business card service (1886a46)
- fix: use npm install instead of npm ci (e0b93af)
- fix: resolve build errors and schema inconsistencies (edbd82c)

### Status: ðŸŸ¢ DEPLOYED
